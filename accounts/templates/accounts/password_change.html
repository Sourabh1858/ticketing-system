{% extends "base.html" %}

{% block content %}
<h2>Profile</h2>
<p>Username: {{ user.username }}</p>

<h3>Change Password</h3>

<!-- Loader Section -->
<div id="loader" class="d-none position-fixed top-0 start-0 w-100 h-100 bg-white bg-opacity-75 d-flex justify-content-center align-items-center" style="z-index: 1050;">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>

<form method="post" onsubmit="showLoader(event)">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-outline-success">Change Password</button>
</form>

{% endblock %}

<script>
  // Function to show loader before form submission
  function showLoader(event) {
      event.preventDefault(); // Prevent the form from submitting immediately
      const loader = document.getElementById('loader');
      loader.classList.remove('d-none'); // Show the loader

      // Simulate form submission with a timeout (remove this if actual AJAX is used)
      setTimeout(function() {
          event.target.submit(); // Submit the form after showing the loader
      }, 500); // Adjust this timeout duration as needed, but ensure itâ€™s a small delay
  }
</script>

{% comment %} {% extends "base.html" %}

{% block content %}
    <h2>Profile</h2>
    <p>Username: {{ user.username }}</p>

    <h3>Change Password</h3>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-outline-success">Change Password</button>
{% endblock %} {% endcomment %}